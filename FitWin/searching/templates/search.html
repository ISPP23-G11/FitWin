
<!DOCTYPE html>
{% extends 'navbar_clients.html' %}

{% block body %}
<div class="">
  <h1>Recomendaciones</h1>
  <table class="table table-striped">
      <thead>
        <tr>
          <th>Título</th>
          <th>Descripción</th>
          <th>Lugar</th>
          <th>Precio</th>
          <th>Fecha de inicio</th>
          <th>Fecha de fin</th>
          <th>Categorías</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
          {% for recommendation in recommended%}
          <tr>
              <td>{{ recommendation.title }}</td>
              <td>{{ recommendation.description }}</td>
              <td>{{ recommendation.place }}</td>
              <td>{{ recommendation.price }}</td>
              <td>{{ recommendation.start_date|date:'d/m/Y H:i' }}</td>
              <td>{{ recommendation.finish_date|date:'d/m/Y H:i' }}</td>
              <td>
                  {% for category in recommendation.categories.all %}
                  {{ category.name }}{% if not forloop.last %}, {% endif %}
                  {% empty %}
                  N/A
                  {% endfor %}
              </td>
              <td>
                  <a href="/example" class="btn btn-info">Ver</a>
              </td>
          </tr>
          {%endfor%}

</div>
<h1>Lista de Anuncios</h1>
<div class="">
  <form method="GET" class="form-group">
  <label for="title">Título:</label>
  <input type="text" class="form-control" id="title" name="title" value="{{ request.GET.title }}">

  <label for="description">Descripción:</label>
  <input type="text" class="form-control" id="description" name="description" value="{{ request.GET.description }}">

  <label for="place">Lugar:</label>
  <input type="text" class="form-control" id="place" name="place" value="{{ request.GET.place }}">

  <label for="price">Precio:</label>
  <input type="number" class="form-control" id="price" name="price" value="{{ request.GET.price }}">

  <label for="start_date">Fecha de inicio:</label>
  <input type="datetime-local" class="form-control" id="start_date" name="start_date" value="{{ request.GET.start_date|default_if_none:'' }}">

  <label for="finish_date">Fecha de fin:</label>
  <input type="datetime-local" class="form-control" id="finish_date" name="finish_date" value="{{ request.GET.finish_date|default_if_none:'' }}">

  <label for='trainer'>Entrenador:</label>
  <input type="text" class="form-control" id="trainer" name="trainer" value="{{request.GET.trainer}}">

  <label for="category">Categoría:</label>
  <select id="category_difficulty" class="form-control" name="category_difficulty">
    <option value="">Filtrado por dificultad</option>
    {% for category in categories %}
      {%if category.types == 'difficulty'%}
        <option value="{{ category.id }}" {% if category.id == request.GET.category_difficulty %}selected{% endif %}>{{ category.name }}</option>
      {%endif%}
    {% endfor %}
  </select>
  <select id="category_objective" class="form-control" name="category_objective">
    <option value="">Filtrado por objetivo</option>
    {% for category in categories %}
      {%if category.types == 'objectives'%}
        <option value="{{ category.id }}" {% if category.id == request.GET.category_objective %}selected{% endif %}>{{ category.name }}</option>
      {%endif%}
    {% endfor %}
  </select>
  <select id="category_recovery" class="form-control" name="category_recovery">
    <option value="">Filtrado por lesion</option>
    {% for category in categories %}
      {%if category.types == 'recovery'%}
        <option value="{{ category.id }}" {% if category.id == request.GET.category_recovery %}selected{% endif %}>{{ category.name }}</option>
      {%endif%}
    {% endfor %}
  </select>

  <button type="submit" class="btn btn-primary">Filtrar</button>
  </form>
</div>

{% if announcements %}
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Título</th>
        <th>Descripción</th>
        <th>Lugar</th>
        <th>Precio</th>
        <th>Fecha de inicio</th>
        <th>Fecha de fin</th>
        <th>Categorías</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      {% for announcement in announcements %}
      <tr>
        <td>{{ announcement.title }}</td>
        <td>{{ announcement.description }}</td>
        <td>{{ announcement.place }}</td>
        <td>{{ announcement.price }}</td>
        <td>{{ announcement.start_date|date:'d/m/Y H:i' }}</td>
        <td>{{ announcement.finish_date|date:'d/m/Y H:i' }}</td>
        <td>
          {% for category in announcement.categories.all %}
          {{ category.name }}{% if not forloop.last %}, {% endif %}
          {% empty %}
          N/A
          {% endfor %}
        </td>
        <td>
          <a href="/example" class="btn btn-info">Ver</a>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="8">No se encontraron anuncios.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <p>No se encontraron anuncios.</p>
{% endif %}
{% endblock %}
